---
name: init
description: bot起動時処理
---

# ボット起動時処理

ボットがオフラインだった間の未処理メッセージを検出し、処理を実行するスキル。
チャンネル ID は引数で指定される。

**重要**: 処理の途中でユーザーへのテキスト出力を一切行わないでください。画像の読み取り結果、日付の決定、コマンド実行の報告などの途中経過は出力せず、すべての処理が完了した後に「出力例」の形式のみで結果を出力してください。

## 処理フロー

1. `!discord history ID` で指定されたチャンネルの履歴を取得
  - Discord Bot 側で関係ないユーザーのメッセージは除外される
2. 各メッセージのリアクションを確認
3. ボット自身のメッセージは除外
4. ✅ リアクションがついていないメッセージを特定
5. 該当するメッセージに対して `!discord exec <id>` を実行

## 注意事項

- ボット自身の発言（Bot が author のメッセージ）は処理対象外
- ✅ がついているメッセージは処理済みとしてスキップ
- 複数の未処理メッセージがある場合は、古い順に処理する
- 処理完了後は通常通り ✅ リアクションがつく（exec 先の処理で）

## 出力例

処理すべきメッセージがない場合: **絶対にテキストを出力しないでください。** 「処理なし」「完了」などの報告も禁止です。何も出力せず即座に終了してください。

処理すべきメッセージが2件ある場合：

```
!discord exec 1234567890
!discord exec 1234567891
```
